"use strict";(globalThis.webpackChunk_clerk_clerk_js=globalThis.webpackChunk_clerk_clerk_js||[]).push([["776"],{40429:function(e,t,o){o.r(t),o.d(t,{OAuthConsent:()=>C,OAuthConsentInternal:()=>y}),o(65223),o(91634),o(98383),o(45261),o(70957),o(24551),o(22349),o(56113);var r=o(73312),n=o(83799),l=o(69144),i=o(11576),a=o(64204),c=o(53174),s=o(92418),d=o(2672),u=o(92654),h=o(56459),p=o(19732),b=o(96519),x=o(30215),g=o(51217),Z=o(25407);function y(){let{scopes:e,oAuthApplicationName:t,oAuthApplicationLogoUrl:o,oAuthApplicationUrl:d,redirectUrl:h,onDeny:b,onAllow:x}=(0,i.useOAuthConsentContext)(),{user:y}=(0,n.aF)(),{applicationName:C,logoImageUrl:w}=(0,i.useEnvironment)().displayConfig,[R,v]=(0,l.useState)(!1),A=null==y?void 0:y.emailAddresses.find(e=>{var t;return e.id===(null==(t=y.primaryEmailAddress)?void 0:t.id)});function S(){try{let{hostname:e}=new URL(h);return e.split(".").slice(-2).join(".")}catch{return""}}return(0,r.BX)(a.Flow.Root,{flow:"oauthConsent",children:[(0,r.BX)(s.Z.Root,{children:[(0,r.BX)(s.Z.Content,{children:[(0,r.BX)(u.h.Root,{children:[o&&w&&(0,r.BX)(m,{children:[(0,r.tZ)($,{justify:"end",children:(0,r.tZ)(c.u,{src:o,alt:t,href:d,isExternal:!0})}),(0,r.tZ)(k,{}),(0,r.tZ)($,{justify:"start",children:(0,r.tZ)(c.u,{})})]}),o&&!w&&(0,r.tZ)(m,{children:(0,r.BX)(a.Box,{sx:{position:"relative"},children:[(0,r.tZ)(c.u,{src:o,alt:t,href:d,isExternal:!0}),(0,r.tZ)(B,{size:"sm",sx:e=>({position:"absolute",bottom:"calc(".concat(e.space.$3," * -1)"),right:"calc(".concat(e.space.$3," * -1)")})})]})}),!o&&w&&(0,r.BX)(m,{children:[(0,r.tZ)($,{justify:"end",children:(0,r.tZ)(B,{})}),(0,r.tZ)(k,{}),(0,r.tZ)($,{justify:"start",children:(0,r.tZ)(c.u,{})})]}),!o&&!w&&(0,r.tZ)(m,{children:(0,r.tZ)(B,{})}),(0,r.tZ)(u.h.Title,{localizationKey:t}),(0,r.tZ)(u.h.Subtitle,{localizationKey:"wants to access ".concat(C," on behalf of ").concat(A)})]}),(0,r.BX)(a.Box,{sx:e=>({textAlign:"left",borderWidth:e.borderWidths.$normal,borderStyle:e.borderStyles.$solid,borderColor:e.colors.$borderAlpha100,borderRadius:e.radii.$lg,overflow:"hidden"}),children:[(0,r.tZ)(a.Box,{sx:e=>({padding:e.space.$3,background:g.common.mergedColorsBackground(Z.O9.setAlpha(e.colors.$colorBackground,1),e.colors.$neutralAlpha50)}),children:(0,r.tZ)(a.Text,{variant:"subtitle",localizationKey:"This will allow ".concat(t," access to:")})}),(0,r.tZ)(a.Box,{as:"ul",sx:e=>({margin:e.sizes.$none,padding:e.sizes.$none}),children:(e||[]).map(e=>(0,r.tZ)(a.Box,{sx:e=>({display:"flex",alignItems:"baseline",paddingInline:e.space.$3,paddingBlock:e.space.$2,borderTopWidth:e.borderWidths.$normal,borderTopStyle:e.borderStyles.$solid,borderTopColor:e.colors.$borderAlpha100,"&::before":{content:'""',display:"inline-block",width:e.space.$1,height:e.space.$1,background:e.colors.$colorMutedForeground,borderRadius:e.radii.$circle,transform:"translateY(-0.1875rem)",marginRight:e.space.$2,flexShrink:0}}),as:"li",children:(0,r.tZ)(a.Text,{variant:"subtitle",localizationKey:e.description||e.scope||""})},e.scope))})]}),(0,r.tZ)(a.Box,{sx:e=>({background:"rgba(243, 107, 22, 0.12)",padding:e.space.$4,borderRadius:e.radii.$lg}),children:(0,r.BX)(a.Text,{colorScheme:"warning",variant:"caption",children:["Make sure that you trust ",t," ","",(0,r.BX)(p.u.Root,{children:[(0,r.tZ)(p.u.Trigger,{children:(0,r.BX)(a.Text,{as:"span",role:"button",tabIndex:0,"aria-label":"View full URL",variant:"caption",sx:{textDecoration:"underline",textDecorationStyle:"dotted",cursor:"pointer",outline:"none",display:"inline-block"},onClick:()=>v(!0),children:["(",S(),")"]})}),(0,r.tZ)(p.u.Content,{text:"View full URL"})]}),"",". You may be sharing sensitive data with this site or app."]})}),(0,r.BX)(a.Grid,{columns:2,gap:3,children:[(0,r.tZ)(a.Button,{colorScheme:"secondary",variant:"outline",localizationKey:"Deny",onClick:b}),(0,r.tZ)(a.Button,{localizationKey:"Allow",onClick:x}),(0,r.BX)(a.Text,{sx:{gridColumn:"span 2"},colorScheme:"secondary",variant:"caption",children:["If you allow access, this app will redirect you to"," ",(0,r.BX)(p.u.Root,{children:[(0,r.tZ)(p.u.Trigger,{children:(0,r.tZ)(a.Text,{as:"span",role:"button",tabIndex:0,"aria-label":"View full URL",variant:"caption",sx:{textDecoration:"underline",textDecorationStyle:"dotted",cursor:"pointer",outline:"none",display:"inline-block"},onClick:()=>v(!0),children:S()})}),(0,r.tZ)(p.u.Content,{text:"View full URL"})]})]})]})]}),(0,r.tZ)(s.Z.Footer,{})]}),(0,r.tZ)(f,{isOpen:R,onOpen:()=>v(!0),onClose:()=>v(!1),redirectUri:h,oAuthApplicationName:t})]})}function f(e){let{onOpen:t,onClose:o,isOpen:n,redirectUri:l,oAuthApplicationName:i}=e;return n?(0,r.tZ)(h.Modal,{handleOpen:t,handleClose:o,children:(0,r.tZ)(s.Z.Root,{children:(0,r.BX)(s.Z.Content,{children:[(0,r.BX)(u.h.Root,{children:[(0,r.tZ)(u.h.Title,{localizationKey:"Redirect URL"}),(0,r.tZ)(u.h.Subtitle,{localizationKey:"Make sure you trust ".concat(i," and that this URL belongs to ").concat(i,".")})]}),(0,r.tZ)(x.gx,{style:{maxHeight:"none"},cols:50,rows:6,defaultValue:l,readOnly:!0})]})})}):null}function m(e){let{children:t}=e;return(0,r.tZ)(a.Flex,{justify:"center",align:"center",gap:4,sx:e=>({marginBlockEnd:e.space.$6}),children:t})}function $(e){let{children:t,sx:o,...n}=e;return(0,r.tZ)(a.Flex,{...n,sx:[{flex:1},o],children:t})}function B(e){let{size:t="md",sx:o}=e,n=e=>{let o="sm"===t?e.space.$6:e.space.$12;return{width:o,height:o}};return(0,r.tZ)(a.Box,{sx:e=>[{background:g.common.mergedColorsBackground(Z.O9.setAlpha(e.colors.$colorBackground,1),e.colors.$neutralAlpha50),borderRadius:e.radii.$circle,borderWidth:e.borderWidths.$normal,borderStyle:e.borderStyles.$solid,borderColor:e.colors.$borderAlpha100,display:"flex",alignItems:"center",justifyContent:"center"},n,o],children:(0,r.tZ)(a.Icon,{icon:b.LG,sx:e=>({color:e.colors.$primary500})})})}function k(){return(0,r.tZ)(a.Box,{as:"svg",fill:"none",viewBox:"0 0 16 2",height:2,"aria-hidden":!0,sx:e=>({color:e.colors.$colorMutedForeground}),children:(0,r.tZ)("path",{stroke:"currentColor",strokeDasharray:"0.1 4",strokeLinecap:"round",strokeWidth:"2",d:"M1 1h14"})})}let C=(0,d.withCardStateProvider)(y)}}]);